!function(t,e){if("function"==typeof define&&define.amd)define(["module","exports"],e);else if("undefined"!=typeof exports)e(module,exports);else{var i={exports:{}};e(i,i.exports),t.swipeNav=i.exports}}(this,function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t){var e=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});t.dispatchEvent(e)}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),l=function(){function t(e){i(this,t),this._container=e.container,this._element=this._container.children[0],this._slides=Array.prototype.slice.call(this._element.children),this._resizeCallback=this._resize.bind(this),this._touchStartCallback=this._touchStart.bind(this),this._touchMoveCallback=this._touchMove.bind(this),this._touchEndCallback=this._touchEnd.bind(this),this._SLIDE_MASS=1,this._SWIPE_ENERGY_THRESHOLD=.25,this._CLICK_ENERGY_THRESHOLD=.03,this._CLICK_TIME_MAX=350,this._animationFrameId=null,this._width=0,this._startX=null,this._startY=null,this._startTime=null,this._isScrolling=null,this._deltaX=null,this._deltaY=null,this._deltaT=null,this._distance=null,this._velocity=0,this._energy=0,this._slideIndex=e.slideIndex||0,this._slidePositions=[],this._animationCallbacks=[],this._isSwipeLeftAllowed=!0,this._isSwipeRightAllowed=!0,this.setup()}return n(t,null,[{key:"create",value:function(e){return new t(e)}}]),n(t,[{key:"_moveSlide",value:function(t,e,i){var s=this._slides[t];s&&(this._slidePositions[t]=e,s.style.transitionDuration=(i||0)+"ms",s.style.transform="translateX("+e+"px)")}},{key:"_translateSlide",value:function(t,e,i){var s=this._slides[t];s&&(s.style.transitionDuration=(i||0)+"ms",s.style.transform="translateX("+(this._slidePositions[t]+e)+"px)")}},{key:"_executeAnimations",value:function(t,e){for(var i=0;i<this._animationCallbacks.length;i++)this._animationCallbacks[i](t,e)}},{key:"_touchStart",value:function(t){t.preventDefault(),this._startX=t.touches[0].pageX,this._startY=t.touches[0].pageY,this._startTime=t.timeStamp,this._isScrolling=null,this._deltaX=0,this._deltaY=0,this._deltaT=0,this._distance=0,this._velocity=0,this._energy=0,this._element.addEventListener("touchmove",this._touchMoveCallback,!1),this._element.addEventListener("touchend",this._touchEndCallback,!1)}},{key:"_touchMove",value:function(t){var e=this;if(!(t.touches.length>1||t.scale&&1!==t.scale)){var i=this._deltaX;if(this._deltaX=t.touches[0].pageX-this._startX,this._deltaY=t.touches[0].pageY-this._startY,null===this._isScrolling&&(this._isScrolling=Math.abs(this._deltaX)<Math.abs(this._deltaY)),!this._isScrolling&&(t.preventDefault(),i!==this._deltaX)){var s=this._deltaX<0,n=this._deltaX>0,l=0===this._slideIndex,a=this._slideIndex===this._slides.length-1,h=!0,_=!0,d=n&&(l||!_)||s&&(a||!h);this._distance=d?this._deltaX/(Math.abs(this._deltaX)/this._width+1):this._deltaX;var o=this._deltaT,r=this._velocity||0;this._deltaT=t.timeStamp-this._startTime,this._velocity=(this._deltaX-i)/(this._deltaT-o),this._energy+=(this._velocity-r)*this._SLIDE_MASS,null===this._animationFrameId&&(this._animationFrameId=window.requestAnimationFrame(function(){e._translateSlide(e._slideIndex-1,e._distance,0),e._translateSlide(e._slideIndex,e._distance,0),e._translateSlide(e._slideIndex+1,e._distance,0),e._executeAnimations(e._distance/e._width,0),e._animationFrameId=null}))}}}},{key:"_touchEnd",value:function(t){var e=this,i=this._distance<0,n=this._distance>0,l=Math.abs(this._energy)>this._SWIPE_ENERGY_THRESHOLD,a=n&&0!==this._slideIndex&&this._isSwipeRightAllowed||i&&this._slideIndex!==this._slides.length-1&&this._isSwipeLeftAllowed,h=Math.abs(this._energy)<this._CLICK_ENERGY_THRESHOLD,_=t.timeStamp-this._startTime<this._CLICK_TIME_MAX;this._element.removeEventListener("touchmove",this._touchMoveCallback,!1),this._element.removeEventListener("touchend",this._touchEndCallback,!1),null!==this._animationFrameId&&(window.cancelAnimationFrame(this._animationFrameId),this._animationFrameId=null),this._isSwipeLeftAllowed=!0,this._isSwipeRightAllowed=!0,this._isScrolling||(h&&_&&s(t.target),window.requestAnimationFrame(function(){var t=Math.max(0,e._width-Math.abs(e._deltaX)),s=Math.sqrt(Math.abs(e._energy)/(.5*e._SLIDE_MASS)),n=t/s;l&&a?i?(e._moveSlide(e._slideIndex-1,-e._width,0),e._moveSlide(e._slideIndex,e._slidePositions[e._slideIndex]-e._width,n),e._moveSlide(e._slideIndex+1,e._slidePositions[e._slideIndex+1]-e._width,n),e._executeAnimations(-1,n),e._slideIndex+=1):(e._moveSlide(e._slideIndex+1,e._width,0),e._moveSlide(e._slideIndex,e._slidePositions[e._slideIndex]+e._width,n),e._moveSlide(e._slideIndex-1,e._slidePositions[e._slideIndex-1]+e._width,n),e._executeAnimations(1,n),e._slideIndex-=1):(e._moveSlide(e._slideIndex-1,-e._width,300),e._moveSlide(e._slideIndex,0,300),e._moveSlide(e._slideIndex+1,e._width,300),e._executeAnimations(0,300)),e._animationCallbacks=[]}))}},{key:"_resize",value:function(){this.kill(),this.setup()}},{key:"setup",value:function(){var t=this;this._width=this._container.getBoundingClientRect().width||this._container.offsetWidth,this._element.style.width=this._slides.length*this._width*2+"px",this._slidePositions=new Array(this._slides.length),this._slides.forEach(function(e,i){e.style.width=t._width+"px",e.setAttribute("data-index",i),e.style.left=i*-t._width+"px";var s=void 0;s=t._slideIndex>i?-t._width:t._slideIndex<i?t._width:0,t._moveSlide(i,s,0)}),this._element.addEventListener("touchstart",this._touchStartCallback,!1),window.addEventListener("resize",this._resizeCallback,!1),this._container.style.visibility="visible"}},{key:"kill",value:function(){var t=this;this._element.style.width="",this._element.style.left="",this._slides.forEach(function(e,i){e.style.width="",e.style.left="",t._moveSlide(i,0,0)}),this._element.removeEventListener("touchstart",this._touchStartCallback,!1),this._element.removeEventListener("touchmove",this._touchMoveCallback,!1),this._element.removeEventListener("touchend",this._touchEndCallback,!1),window.removeEventListener("resize",this._resizeCallback)}},{key:"setIsContentAvailable",value:function(t){var e=t.left,i=t.right;this._isSwipeLeftAllowed=i,this._isSwipeRightAllowed=e}},{key:"setAnimations",value:function(t){this._animationCallbacks=t}}]),t}();e["default"]=l,t.exports=e["default"]});