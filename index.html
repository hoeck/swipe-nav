<!DOCTYPE HTML>
<html>
    <head>
        <title>SwipeNav</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/github.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/furtive/2.2.4/furtive.min.css">

        <style>
            .divider {
                border-bottom: .1rem solid #efefef;
            }

            .full {
                height: 100%;
                width: 100%;
            }

            .vscroll {
                overflow-y: auto;
            }

            div.absolute-full {
                position: absolute !important;
                top:0; bottom: 0; left:0; right: 0;
            }

            .blurred {
                filter: blur(2px);
                -webkit-filter: blur(2px);
            }

            /* SwipeNav required styles */

            .swipe-nav {
                overflow: hidden;
                visibility: hidden;
                position: relative;
            }

            .swipe-nav-wrap {
                overflow: hidden;
                position: relative;
            }

            .swipe-nav-wrap > div {
                float: left;
                width: 100%;
                position: relative;
            }
        </style>

    </head>
    <body>
        <!-- swipe component -->
        <div class="swipe-nav absolute-full">
            <div class="swipe-nav-wrap full">
                <div class="full px2">
                    <!-- level 0 -->
                    <div ontouchstart="loadContent('nothing'); noMoreContent()" class="txt--center">
                        <h2>SwipeNav</h2>
                        <div>
                            <em>Swipe to the right over each item to uncover its contents!</em>
                        </div>
                    </div>
                    <div ontouchstart="loadContent('intro'); animateTopMenuForward(event);" class="h4 item p2 divider">Swipe left to navigate</div>
                    <div ontouchstart="loadContent('usage'); animateTopMenuForward(event);" class="h4 item p2 divider">Usage</div>
                    <div ontouchstart="loadContent('links'); animateTopMenuForward(event);" class="h4 item p2">Links</div>
                </div>
                <div class="full px2 vscroll">
                    <!-- level 1 -->
                    <div id="nothing"></div>
                    <div ontouchstart="animateTopMenuBack();" class="full" style="display: none;" id="intro">
                        <div ontouchstart="loadContent('nothing2'); noMoreContent()" class="txt--center">
                            <h2>Intro</h2>
                        </div>
                        <div ontouchstart="loadContent('nothing2'); noMoreContent();" class="h4 item p2 divider">And swipe right to navigate back</div>
                        <div ontouchstart="loadContent('intro-level2');" class="h4 item p2 divider">Or swipe left to go one level deeper</div>
                        <div ontouchstart="loadContent('rationale');" class="h4 item p2">Rationale</div>
                    </div>

                    <div ontouchstart="noMoreContent(); animateTopMenuBack();" id="links" class="full" style="display: none;">
                        <h2>Links</h2>

                        <div class="media">
                            <div class="media-figure">
                                <b>Github</b>
                            </div>
                            <div class="media-body">
                                <a class="btn--link" href="https://github.com/hoeck/swipe-nav">github.com/hoeck/swipe-nav</a>
                            </div>
                        </div>

                        <div class="media">
                            <div class="media-figure">
                                <b>Example Project</b>
                            </div>
                            <div class="media-body">
                                <a class="btn--link" href="https://hoeck.github.io/hnbrowser">hoeck.github.io/hnbrowser</a>
                            </div>
                        </div>
                    </div>

                    <div ontouchstart="noMoreContent(); animateTopMenuBack();" id="usage" class="full" style="display: none;">
                        <h2 class="txt--center">Usage</h2>

                        <pre><code class="css">.swipe-nav {
    overflow: hidden;
    visibility: hidden;
    position: relative;
}

.swipe-nav-wrap {
    overflow: hidden;
    position: relative;
}

.swipe-nav-wrap > div {
    float: left;
    width: 100%;
    position: relative;
}
                        </code></pre>

                        <pre><code class="html">&lt;script src="swipe-nav.js"&gt;&lt;/script&gt;

&lt;div class="swipe-nav"&gt;
    &lt;div class="swipe-nav-wrap"&gt;
        &lt;div id="0"&gt;Slide 0&lt;/div&gt;
        &lt;div id="1"&gt;Slide 1&lt;/div&gt;
        &lt;div id="2"&gt;Slide 2&lt;/div&gt;
        &lt;div id="3"&gt;Slide 2&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
                        </code></pre>

                        <pre><code class="javascript">const element = document.querySelector(
    '.swipe-nav'
);

const swipeNavComponent = swipeNav.create({
    container: element
});

// use touchstart events to manipulate
// slide contents
function touchStart (event) {
    // show, hide, create or remove
    // content based on event.target

    // or set swipe boundaries via
    swipeNavComponent.setIsContentAvailable({
        left:true,
        right: false
    });
}
                        </code></pre>
                    </div>
                </div>
                <div class="full px2">
                    <!-- level 2 -->
                    <div id="nothing2"></div>
                    <div id="intro-level2">
                        <div ontouchstart="noMoreContent();" class="txt--center">
                            <h2>Intro (2)</h2>

                            <div>nothing to see here</div>
                        </div>
                    </div>
                    <div id="rationale">
                        <div ontouchstart="noMoreContent();" class="txt--center">
                            <h2>Rationale</h2>

                            <p>
                                Use <code>SwipeNav</code> to navigate trees with fat nodes on a mobile device, e.g. discussion threads.
                                See <a href="https://hoeck.github.io/hnbrowser">hoeck.github.io/hnbrowser</a>.
                            </p>

                            <p>
                                <code>SwipeNav</code> is built using <code>requestAnimationFrame</code> and a fast move event. It works well on mobile devices firing a lot of touch events.
                            </p>

                            <p>
                                <code>SwipeNav</code> computes the force of a swipe to achieve a natural slide movement.
                            </p>

                            <p>
                                The <code>SwipeNav</code> API is minimal and best used from within react or angular.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- this demo works only on touch-enabled devices-->
        <div id="no-touch-info" style="position:absolute; top:0; right:0; bottom:0; left:0; background-color:rgba(0,0,0,0.2); display:none;">
            <div class="measure center">
                <div class="bg--red fnt--white p2 mx2 txt--center" style="margin-top:10rem;">
                    <h4>SwipeNav needs <b>touch events</b> in order to work.</h4>

                    <p>(use your browsers devtools and enable mobile/responsive emulation mode)</p>
                </div>
            </div>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/highlight.min.js"></script>
        <script src="dist/swipe-nav.min.js"></script>
        <script>
hljs.initHighlightingOnLoad();

// pure JS
var element = document.querySelectorAll('.swipe-nav')[0];

var swipeNavComponent = swipeNav.create({
    container: element
});

function noMoreContent () {
    swipeNavComponent.setIsContentAvailable({left:true, right: false});
}

function loadContent (id) {
    swipeNavComponent.setIsContentAvailable({left:true, right: true});

    var contentElement = document.getElementById(id);

    Array.prototype.slice.call(contentElement.parentElement.children).forEach((element) => {
        element.style.display = 'none';
    });

    contentElement.style.display = 'block';
}

var selectedTopMenuElement;

function animateTopMenuForward (event) {
    selectedTopMenuElement = event.currentTarget;
    swipeNavComponent.setAnimations([(distance, duration) => {
        var color = 255 - Math.abs(Math.floor(distance * 128));
        selectedTopMenuElement.style.transitionDuration = `${duration}ms`;
        selectedTopMenuElement.style.background = `rgb(${color},${color},${color})`;
    }]);
}

function animateTopMenuBack () {
    swipeNavComponent.setAnimations([(distance, duration) => {
        var color = 128 + Math.abs(Math.floor(distance * 128));
        selectedTopMenuElement.style.transitionDuration = `${duration}ms`;
        selectedTopMenuElement.style.background = `rgb(${color},${color},${color})`;
    }]);
}



// display a warning if this is not a touch device
if (!('ontouchstart' in window)) {
    element.classList.add('blurred');
    document.getElementById('no-touch-info').style.display = 'block';
}
        </script>
    </body>
</html>
